**Fadex25 README**

**Overview**

Fadex25 is a cryptocurrency data aggregation and storage application built with TypeScript and Node.js, utilizing the Bybit API via the CCXT library to fetch OHLCV (Open, High, Low, Close, Volume) data for perpetual futures and spot markets. The app is designed to load historical data efficiently into a SQLite database and maintain real-time updates. This README provides a comprehensive guide to the current version, directory structure, recent file changes, future ideas (UI and Backtrader integration), and setup instructions.

**Current Version Features**

- **Data Fetching**: Fetches OHLCV data from Bybit for specified symbols (e.g., BTC/USDT, ETH/USDT) across multiple timeframes (1m, 5m, 15m, 1h).
- **Loading Mode**: Rapidly loads 4 months of historical data, completing when the database is 100% full (takes ~66 seconds for 4 symbols).
- **Running Mode**: Maintains real-time data with periodic updates every 30 seconds.
- **Database Storage**: Uses better-sqlite3 to store data in market_data.db with WAL journaling for performance.
- **Logging**: Periodic logging every 5 seconds during Loading Mode to monitor progress and throttle errors.
- **Exchange Flexibility**: Designed to support multiple exchanges (e.g., Binance) via a factory pattern (in progress).

**Directory Structure**

Fadex25/

├── backend/ # Main application directory

│ ├── api/ # Exchange and database logic

│ │ ├── BybitOhlcApi.ts # Fetches OHLCV data from Bybit via CCXT

│ │ ├── BybitOhlcApi.ts.bak # Backup of previous versions

│ │ ├── DatabaseUtils.ts # Manages SQLite database operations

│ │ └── ... # Other API-related files (e.g., BinanceOhlcApi.ts in future)

│ ├── declarations/ # TypeScript declaration files

│ │ └── better-sqlite3.d.ts # Custom type definitions for better-sqlite3

│ ├── dist/ # Compiled output (generated by tsc)

│ ├── node_modules/ # Node.js dependencies

│ ├── test/ # Test files (e.g., SQLite 4mo test.sql)

│ ├── .env # Environment variables

│ ├── market_data.db # SQLite database file

│ ├── package-lock.json # Lock file for dependencies

│ ├── package.json # Project configuration and scripts

│ ├── redis.conf.bak # Backup of Redis configuration

│ ├── requirements.txt # Dependency list (optional)

│ ├── server.ts # Entry point and main logic

│ ├── server.ts.bak # Backup of server.ts

│ ├── tsconfig.json # TypeScript configuration

│ └── ... # Other backup files (e.g., serverFAST.bak)

├── frontend/ # Future UI directory (currently empty)

└── .gitignore # Git ignore file

└── package-lock.json # Lock file for frontend (if added)

- **backend/api/**: Contains exchange-specific logic and database utilities.
- **backend/declarations/**: Custom TypeScript definitions to support external libraries.
- **backend/dist/**: Output directory for compiled JavaScript files.
- **backend/test/**: SQL scripts for database testing (e.g., 4-month data check).
- **Root Files**: Configuration and entry point files (package.json, server.ts, tsconfig.json).

**Recent File Changes and Their Functions**

**1\.** declarations/better-sqlite3.d.ts

- **Purpose**: Defines TypeScript interfaces for the better-sqlite3 library to ensure type safety when interacting with the SQLite database.
- **Functions**:
  - DatabaseConstructor: Interface for creating a new SQLite database instance with options (e.g., verbose, fileMustExist, readonly).
  - Database: Interface for database operations, including exec, prepare, close, pragma, open, transaction, run, get, all, and iterate, with support for storing OHLCV data.
- **Impact**: Enables type checking for database operations in DatabaseUtils.ts, improving code reliability.

**2\.** tsconfig.json

- **Purpose**: Configures the TypeScript compiler for the project, ensuring proper module resolution and file inclusion.
- **Functions**:
  - "compilerOptions": Sets target to ES2020, module to CommonJS, and enables strict type checking.
  - "include": Specifies files to compile (e.g., server.ts, all .ts files in api/), updated to include new declaration files.
  - "exclude": Excludes node_modules and test files from compilation.
- **Impact**: Ensures the project compiles correctly with the latest TypeScript features and includes all necessary files, supporting the recent better-sqlite3.d.ts addition.

**3\.** package.json

- **Purpose**: Manages project dependencies, scripts, and metadata.
- **Functions**:
  - "dependencies": Lists required packages (e.g., better-sqlite3@11.8.1, ccxt@4.2.8, express@4.21.2, ioredis@5.6.0, node-cron@3.0.3) for data fetching, storage, and scheduling.
  - "devDependencies": Includes TypeScript-related packages (e.g., @types/cors, @types/express, @types/ioredis) for development.
  - "scripts": Defines start (ts-node server.ts) and build (tsc) commands to run and compile the app.
- **Impact**: Ensures all dependencies are installed and scripts are configured to support the current workflow, including recent TypeScript enhancements.

**Setup Instructions**

1. **Clone the Repository**:

bash

git clone &lt;repository-url&gt;

cd Fadex25/backend

1. **Install Dependencies**:

bash

npm install

1. **Configure Environment** (optional):
    - Create a .env file with any necessary environment variables (e.g., API keys if added later).
2. **Run the Application**:

bash

npm run start -- --exchange bybit

- - Use --exchange binance to switch to Binance (once implemented).

1. **Check Database**:
    - Verify data in market_data.db using a SQLite client or the provided test/SQLite 4mo test.sql.

**Future Ideas**

**1\. UI Integration**

- **Goal**: Develop a web-based interface (in frontend/) to visualize data and control the app.
- **Design**:
  - Use React or Vue.js for the frontend, connected to the backend via an Express API.
  - Include a dropdown to select the exchange (Bybit, Binance, etc.), mirroring the CLI --exchange flag.
  - Display real-time OHLCV charts using libraries like Chart.js, updated via WebSocket streams.
- **Implementation**: Add an Express server endpoint in server.ts to serve the UI and handle API requests, integrating with the ExchangeApiFactory.

**2\. Backtrader Backtesting**

- **Goal**: Enable backtesting of trading strategies using the stored OHLCV data with the Backtrader library (Python-based).
- **Design**:
  - Export market_data.db to a CSV file periodically using a script (e.g., in DatabaseUtils.ts).
  - Create a Python script to load the CSV into Backtrader, defining strategies (e.g., Moving Average Crossover).
  - Integrate results back into the app for visualization or storage.
- **Implementation**:
  - Add a dumpToCSV function in DatabaseUtils.ts to export data.
  - Install Backtrader (pip install backtrader) and write a Python script in a new backtesting/ directory.
  - Use node-cron to schedule CSV exports and trigger backtesting.

**Notes for Future GROK**

- **App Function**: Fadex25 fetches and stores OHLCV data from Bybit (via CCXT) into SQLite, with plans for multiple exchanges and UI/backtesting integration.
- **Key Files**: server.ts (entry point), BybitOhlcApi.ts (data fetching), DatabaseUtils.ts (storage), better-sqlite3.d.ts (types), tsconfig.json (compilation), package.json (dependencies).
- **Performance**: Current load time 66 seconds for 4 symbols, capped at 1000 bars by Bybit; consider Binance for potential speed gains (20 requests/second).
- **Next Steps**: Implement BinanceOhlcApi.ts, develop frontend, and add Backtrader integration as outlined.

This README ensures future GROK instances can quickly grasp the app’s purpose, structure, and roadmap. Commit this version to Git and proceed with future enhancements as needed!